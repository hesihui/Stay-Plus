{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Tabs,message,List,Typography,Button,Form,DatePicker,InputNumber,Card,Carousel,Image,Modal}from\"antd\";import{bookStay,cancelReservation,getReservations,searchStays}from\"../utils\";import{StayDetailInfoButton}from\"../components/HostHomePage\";import{LeftCircleFilled,RightCircleFilled}from\"@ant-design/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;var TabPane=Tabs.TabPane;var BookStayButton=/*#__PURE__*/function(_React$Component){_inherits(BookStayButton,_React$Component);var _super=_createSuper(BookStayButton);function BookStayButton(){var _this;_classCallCheck(this,BookStayButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:false,modalVisible:false};_this.handleCancel=function(){_this.setState({modalVisible:false});};_this.handleBookStay=function(){_this.setState({modalVisible:true});};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var stay;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:stay=_this.props.stay;_this.setState({loading:true});_context.prev=2;_context.next=5;return bookStay({checkin_date:values.checkin_date.format(\"YYYY-MM-DD\"),checkout_date:values.checkout_date.format(\"YYYY-MM-DD\"),stay:{id:stay.id}});case 5:message.success(\"Successfully book stay\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);message.error(_context.t0.message);case 11:_context.prev=11;_this.setState({loading:false});return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,8,11,14]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(BookStayButton,[{key:\"render\",value:function render(){var stay=this.props.stay;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:this.handleBookStay,shape:\"round\",type:\"primary\",children:\"Book Stay\"}),/*#__PURE__*/_jsx(Modal,{destroyOnClose:true,title:stay.name,visible:this.state.modalVisible,footer:null,onCancel:this.handleCancel,children:/*#__PURE__*/_jsxs(Form,{preserve:false,labelCol:{span:8},wrapperCol:{span:16},onFinish:this.handleSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Checkin Date\",name:\"checkin_date\",rules:[{required:true}],children:/*#__PURE__*/_jsx(DatePicker,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Checkout Date\",name:\"checkout_date\",rules:[{required:true}],children:/*#__PURE__*/_jsx(DatePicker,{})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{loading:this.state.loading,type:\"primary\",htmlType:\"submit\",children:\"Book\"})})]})})]});}}]);return BookStayButton;}(React.Component);var SearchStays=/*#__PURE__*/function(_React$Component2){_inherits(SearchStays,_React$Component2);var _super2=_createSuper(SearchStays);function SearchStays(){var _this2;_classCallCheck(this,SearchStays);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.state={data:[],loading:false};_this2.search=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(query){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this2.setState({loading:true});_context2.prev=1;_context2.next=4;return searchStays(query);case 4:resp=_context2.sent;_this2.setState({data:resp});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);message.error(_context2.t0.message);case 11:_context2.prev=11;_this2.setState({loading:false});return _context2.finish(11);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8,11,14]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();return _this2;}_createClass(SearchStays,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{onFinish:this.search,layout:\"inline\",children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Guest Number\",name:\"guest_number\",rules:[{required:true}],children:/*#__PURE__*/_jsx(InputNumber,{min:1})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Checkin Date\",name:\"checkin_date\",rules:[{required:true}],children:/*#__PURE__*/_jsx(DatePicker,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Checkout Date\",name:\"checkout_date\",rules:[{required:true}],children:/*#__PURE__*/_jsx(DatePicker,{})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{loading:this.state.loading,type:\"primary\",htmlType:\"submit\",children:\"Submit\"})})]}),/*#__PURE__*/_jsx(List,{style:{marginTop:20},loading:this.state.loading,grid:{gutter:16,xs:1,sm:3,md:3,lg:3,xl:4,xxl:4},dataSource:this.state.data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:150},children:item.name}),/*#__PURE__*/_jsx(StayDetailInfoButton,{stay:item})]}),extra:/*#__PURE__*/_jsx(BookStayButton,{stay:item}),children:/*#__PURE__*/_jsx(Carousel,{dots:false,arrows:true,prevArrow:/*#__PURE__*/_jsx(LeftCircleFilled,{}),nextArrow:/*#__PURE__*/_jsx(RightCircleFilled,{}),children:item.images.map(function(image,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Image,{src:image.url,width:\"100%\"})},index);})})},item.id)});}})]});}}]);return SearchStays;}(React.Component);var CancelReservationButton=/*#__PURE__*/function(_React$Component3){_inherits(CancelReservationButton,_React$Component3);var _super3=_createSuper(CancelReservationButton);function CancelReservationButton(){var _this3;_classCallCheck(this,CancelReservationButton);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this3=_super3.call.apply(_super3,[this].concat(args));_this3.state={loading:false};_this3.handleCancelReservation=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this3$props,reservationId,onCancelSuccess;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this3$props=_this3.props,reservationId=_this3$props.reservationId,onCancelSuccess=_this3$props.onCancelSuccess;_this3.setState({loading:true});_context3.prev=2;_context3.next=5;return cancelReservation(reservationId);case 5:onCancelSuccess();_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);message.error(_context3.t0.message);case 11:_context3.prev=11;_this3.setState({loading:false});return _context3.finish(11);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8,11,14]]);}));return _this3;}_createClass(CancelReservationButton,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Button,{loading:this.state.loading,onClick:this.handleCancelReservation,danger:true,shape:\"round\",type:\"primary\",children:\"Cancel Reservation\"});}}]);return CancelReservationButton;}(React.Component);var MyReservations=/*#__PURE__*/function(_React$Component4){_inherits(MyReservations,_React$Component4);var _super4=_createSuper(MyReservations);function MyReservations(){var _this4;_classCallCheck(this,MyReservations);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this4=_super4.call.apply(_super4,[this].concat(args));_this4.state={loading:false,data:[]};_this4.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var resp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this4.setState({loading:true});_context4.prev=1;_context4.next=4;return getReservations();case 4:resp=_context4.sent;_this4.setState({data:resp});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);message.error(_context4.t0.message);case 11:_context4.prev=11;_this4.setState({loading:false});return _context4.finish(11);case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8,11,14]]);}));return _this4;}_createClass(MyReservations,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/_jsx(List,{style:{width:1000,margin:\"auto\"},loading:this.state.loading,dataSource:this.state.data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{actions:[/*#__PURE__*/_jsx(CancelReservationButton,{reservationId:item.id,onCancelSuccess:function onCancelSuccess(){return _this5.loadData();}})],children:/*#__PURE__*/_jsx(List.Item.Meta,{title:/*#__PURE__*/_jsx(Text,{children:item.stay.name}),description:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Text,{children:[\"Checkin Date: \",item.checkin_date]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Text,{children:[\"Checkout Date: \",item.checkout_date]})]})})});}});}}]);return MyReservations;}(React.Component);var GuestHomePage=/*#__PURE__*/function(_React$Component5){_inherits(GuestHomePage,_React$Component5);var _super5=_createSuper(GuestHomePage);function GuestHomePage(){_classCallCheck(this,GuestHomePage);return _super5.apply(this,arguments);}_createClass(GuestHomePage,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"1\",destroyInactiveTabPane:true,children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Search Stays\",children:/*#__PURE__*/_jsx(SearchStays,{})},\"1\"),/*#__PURE__*/_jsx(TabPane,{tab:\"My Reservations\",children:/*#__PURE__*/_jsx(MyReservations,{})},\"2\"),\"ane 3\"]});}}]);return GuestHomePage;}(React.Component);export default GuestHomePage;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/GuestHomePage.js"],"names":["React","Tabs","message","List","Typography","Button","Form","DatePicker","InputNumber","Card","Carousel","Image","Modal","bookStay","cancelReservation","getReservations","searchStays","StayDetailInfoButton","LeftCircleFilled","RightCircleFilled","Text","TabPane","BookStayButton","state","loading","modalVisible","handleCancel","setState","handleBookStay","handleSubmit","values","stay","props","checkin_date","format","checkout_date","id","success","error","name","span","required","offset","Component","SearchStays","data","search","query","resp","marginTop","gutter","xs","sm","md","lg","xl","xxl","item","display","alignItems","maxWidth","images","map","image","index","url","CancelReservationButton","handleCancelReservation","reservationId","onCancelSuccess","MyReservations","loadData","width","margin","GuestHomePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Tabs, message, List, Typography, Button, Form,\n    DatePicker, InputNumber, Card, Carousel,\n    Image, Modal,} from \"antd\";\nimport {bookStay, cancelReservation,\n    getReservations, searchStays,} from \"../utils\";\nimport { StayDetailInfoButton } from \"../components/HostHomePage\";\nimport { LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\n\nconst { Text } = Typography;\nconst { TabPane } = Tabs;\n\nclass BookStayButton extends React.Component {\n    state = {\n        loading: false,\n        modalVisible: false,\n    };\n\n    handleCancel = () => {\n        this.setState({\n            modalVisible: false,\n        });\n    };\n\n    handleBookStay = () => {\n        this.setState({\n            modalVisible: true,\n        });\n    };\n\n    handleSubmit = async (values) => {\n        const { stay } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            await bookStay({\n                checkin_date: values.checkin_date.format(\"YYYY-MM-DD\"),\n                checkout_date: values.checkout_date.format(\"YYYY-MM-DD\"),\n                stay: {\n                    id: stay.id,\n                },\n            });\n            message.success(\"Successfully book stay\");\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        const { stay } = this.props;\n        return (\n            <>\n                <Button onClick={this.handleBookStay} shape=\"round\" type=\"primary\">\n                    Book Stay\n                </Button>\n                <Modal\n                    destroyOnClose={true}\n                    title={stay.name}\n                    visible={this.state.modalVisible}\n                    footer={null}\n                    onCancel={this.handleCancel}\n                >\n                    <Form\n                        preserve={false}\n                        labelCol={{ span: 8 }}\n                        wrapperCol={{ span: 16 }}\n                        onFinish={this.handleSubmit}\n                    >\n                        <Form.Item\n                            label=\"Checkin Date\"\n                            name=\"checkin_date\"\n                            rules={[{ required: true }]}\n                        >\n                            <DatePicker />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"Checkout Date\"\n                            name=\"checkout_date\"\n                            rules={[{ required: true }]}\n                        >\n                            <DatePicker />\n                        </Form.Item>\n                        <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\n                            <Button\n                                loading={this.state.loading}\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                            >\n                                Book\n                            </Button>\n                        </Form.Item>\n                    </Form>\n                </Modal>\n            </>\n        );\n    }\n}\n\nclass SearchStays extends React.Component {\n    state = {\n        data: [],\n        loading: false,\n    };\n\n    search = async (query) => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await searchStays(query);\n            this.setState({\n                data: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        return (\n            <>\n                <Form onFinish={this.search} layout=\"inline\">\n                    <Form.Item\n                        label=\"Guest Number\"\n                        name=\"guest_number\"\n                        rules={[{ required: true }]}\n                    >\n                        <InputNumber min={1} />\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"Checkin Date\"\n                        name=\"checkin_date\"\n                        rules={[{ required: true }]}\n                    >\n                        <DatePicker />\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"Checkout Date\"\n                        name=\"checkout_date\"\n                        rules={[{ required: true }]}\n                    >\n                        <DatePicker />\n                    </Form.Item>\n\n\n                    <Form.Item>\n                        <Button\n                            loading={this.state.loading}\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                        >\n                            Submit\n                        </Button>\n                    </Form.Item>\n\n                </Form>\n\n                {/*展示根据日期的搜索结果*/}\n                <List\n                    style={{ marginTop: 20 }}\n                    loading={this.state.loading}\n                    grid={{\n                        gutter: 16,\n                        xs: 1,\n                        sm: 3,\n                        md: 3,\n                        lg: 3,\n                        xl: 4,\n                        xxl: 4,\n                    }}\n                    dataSource={this.state.data}\n                    renderItem={(item) => (\n                        <List.Item>\n                            <Card\n                                key={item.id}\n                                title={\n                                    <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                                        <Text ellipsis={true} style={{ maxWidth: 150 }}>\n                                            {item.name}\n                                        </Text>\n                                        <StayDetailInfoButton stay={item} />\n                                    </div>\n                                }\n                                extra={<BookStayButton stay={item} />}\n                            >\n                                {\n                                    <Carousel\n                                        dots={false}\n                                        arrows={true}\n                                        prevArrow={<LeftCircleFilled />}\n                                        nextArrow={<RightCircleFilled />}\n                                    >\n                                        {item.images.map((image, index) => (\n                                            <div key={index}>\n                                                <Image src={image.url} width=\"100%\" />\n                                            </div>\n                                        ))}\n                                    </Carousel>\n                                }\n                            </Card>\n                        </List.Item>\n                    )}\n                />\n            </>\n        );\n    }\n}\n\nclass CancelReservationButton extends React.Component {\n    state = {\n        loading: false,\n    };\n\n    handleCancelReservation = async () => {\n        const { reservationId, onCancelSuccess } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            await cancelReservation(reservationId);\n            onCancelSuccess();\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n\n    };\n\n    render() {\n        return (\n            <Button\n                loading={this.state.loading}\n                onClick={this.handleCancelReservation}\n                danger={true}\n                shape=\"round\"\n                type=\"primary\"\n            >\n                Cancel Reservation\n            </Button>\n        );\n    }\n}\n\nclass MyReservations extends React.Component {\n    state = {\n        loading: false,\n        data: [],\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    loadData = async () => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getReservations();\n            this.setState({\n                data: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        return (\n            <List\n                style={{ width: 1000, margin: \"auto\" }}\n                loading={this.state.loading}\n                dataSource={this.state.data}\n                renderItem={(item) => (\n                    <List.Item\n                        actions={[\n                            <CancelReservationButton\n                                reservationId={item.id}\n                                onCancelSuccess={() => this.loadData()}\n                            />,\n                        ]}\n                    >\n                        <List.Item.Meta\n                            title={<Text>{item.stay.name}</Text>}\n                            description={\n                                <>\n                                    <Text>Checkin Date: {item.checkin_date}</Text>\n                                    <br />\n                                    <Text>Checkout Date: {item.checkout_date}</Text>\n                                </>\n                            }\n                        />\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\nclass GuestHomePage extends React.Component {\n    render() {\n        return (\n            <Tabs defaultActiveKey=\"1\" destroyInactiveTabPane={true}>\n                <TabPane tab=\"Search Stays\" key=\"1\">\n                    <SearchStays />\n                </TabPane>\n                <TabPane tab=\"My Reservations\" key=\"2\">\n                    <MyReservations />\n                </TabPane>\n                ane 3\n            </Tabs>\n        );\n    }\n}\n\nexport default GuestHomePage;"]},"metadata":{},"sourceType":"module"}