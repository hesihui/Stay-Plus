{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Tabs,List,Card,message,Typography,Button,Tooltip,Modal,Image,Space,Carousel}from\"antd\";import{InfoCircleOutlined,LeftCircleFilled,RightCircleFilled}from\"@ant-design/icons\";import{deleteStay,getReservationsByStay,getStaysByHost}from\"../utils\";import UploadStay from\"./UploadStay\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;var TabPane=Tabs.TabPane;//idea：将与主要功能不缠绕（互相有关系）的button重新分成一个component\nexport var StayDetailInfoButton=/*#__PURE__*/function(_React$Component){_inherits(StayDetailInfoButton,_React$Component);var _super=_createSuper(StayDetailInfoButton);function StayDetailInfoButton(){var _this;_classCallCheck(this,StayDetailInfoButton);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modalVisible:false};_this.openModal=function(){_this.setState({modalVisible:true});};_this.handleCancel=function(){_this.setState({modalVisible:false});};return _this;}_createClass(StayDetailInfoButton,[{key:\"render\",value:function render(){var stay=this.props.stay;var name=stay.name,description=stay.description,address=stay.address,guest_number=stay.guest_number;var modalVisible=this.state.modalVisible;//name of 弹窗: modal\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View Stay Details\",children:/*#__PURE__*/_jsx(Button,{onClick:this.openModal,style:{border:\"none\"},size:\"large\",icon:/*#__PURE__*/_jsx(InfoCircleOutlined,{})})}),modalVisible&&/*#__PURE__*/_jsx(Modal,{title:name,centered:true,visible:modalVisible,closable:false,footer:null,onCancel:this.handleCancel,children:/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",children:[/*#__PURE__*/_jsx(Text,{strong:true,children:\"Description\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:description}),/*#__PURE__*/_jsx(Text,{strong:true,children:\"Address\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:address}),/*#__PURE__*/_jsx(Text,{strong:true,children:\"Guest Number\"}),/*#__PURE__*/_jsx(Text,{type:\"secondary\",children:guest_number})]})})]});}}]);return StayDetailInfoButton;}(React.Component);var RemoveStayButton=/*#__PURE__*/function(_React$Component2){_inherits(RemoveStayButton,_React$Component2);var _super2=_createSuper(RemoveStayButton);function RemoveStayButton(){var _this2;_classCallCheck(this,RemoveStayButton);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.state={loading:false};_this2.handleRemoveStay=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2$props,stay,onRemoveSuccess;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this2$props=_this2.props,stay=_this2$props.stay,onRemoveSuccess=_this2$props.onRemoveSuccess;_this2.setState({loading:true});_context.prev=2;_context.next=5;return deleteStay(stay.id);case 5://删除后重新加载页面\nonRemoveSuccess();_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);message.error(_context.t0.message);case 11:_context.prev=11;_this2.setState({loading:false});return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,8,11,14]]);}));return _this2;}_createClass(RemoveStayButton,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(Button,{loading:this.state.loading,onClick:this.handleRemoveStay,danger:true,shape:\"round\",type:\"primary\",children:\"Remove Stay\"});}}]);return RemoveStayButton;}(React.Component);var ReservationList=/*#__PURE__*/function(_React$Component3){_inherits(ReservationList,_React$Component3);var _super3=_createSuper(ReservationList);function ReservationList(){var _this3;_classCallCheck(this,ReservationList);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this3=_super3.call.apply(_super3,[this].concat(args));_this3.state={loading:false,reservations:[]};_this3.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this3.setState({loading:true});_context2.prev=1;_context2.next=4;return getReservationsByStay(_this3.props.stayId);case 4:resp=_context2.sent;_this3.setState({reservations:resp});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);message.error(_context2.t0.message);case 11:_context2.prev=11;_this3.setState({loading:false});return _context2.finish(11);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8,11,14]]);}));return _this3;}_createClass(ReservationList,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}},{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,reservations=_this$state.reservations;return/*#__PURE__*/_jsx(List,{loading:loading,dataSource:reservations,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(List.Item.Meta,{title:/*#__PURE__*/_jsxs(Text,{children:[\"Guest Name: \",item.guest.username]}),description:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Text,{children:[\"Checkin Date: \",item.checkin_date]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Text,{children:[\"Checkout Date: \",item.checkout_date]})]})})});}});}}]);return ReservationList;}(React.Component);var ViewReservationsButton=/*#__PURE__*/function(_React$Component4){_inherits(ViewReservationsButton,_React$Component4);var _super4=_createSuper(ViewReservationsButton);function ViewReservationsButton(){var _this4;_classCallCheck(this,ViewReservationsButton);for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}_this4=_super4.call.apply(_super4,[this].concat(args));_this4.state={modalVisible:false};_this4.openModal=function(){_this4.setState({modalVisible:true});};_this4.handleCancel=function(){_this4.setState({modalVisible:false});};return _this4;}_createClass(ViewReservationsButton,[{key:\"render\",value:function render(){var stay=this.props.stay;var modalVisible=this.state.modalVisible;// string template\nvar modalTitle=\"Reservations of \".concat(stay.name);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:this.openModal,shape:\"round\",children:\"View Reservations\"}),modalVisible&&/*#__PURE__*/_jsx(Modal,{title:modalTitle,centered:true,visible:modalVisible,closable:false,footer:null,onCancel:this.handleCancel,destroyOnClose:true,children:/*#__PURE__*/_jsx(ReservationList,{stayId:stay.id})})]});}}]);return ViewReservationsButton;}(React.Component);var MyStays=/*#__PURE__*/function(_React$Component5){_inherits(MyStays,_React$Component5);var _super5=_createSuper(MyStays);function MyStays(){var _this5;_classCallCheck(this,MyStays);for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++){args[_key5]=arguments[_key5];}_this5=_super5.call.apply(_super5,[this].concat(args));_this5.state={loading:false,data:[]};_this5.loadData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var stay,resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:stay=_this5.props.stay;_this5.setState({loading:true});_context3.prev=2;_context3.next=5;return getStaysByHost();case 5:resp=_context3.sent;_this5.setState({data:resp});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](2);message.error(_context3.t0.message);case 12:_context3.prev=12;_this5.setState({loading:false});return _context3.finish(12);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[2,9,12,15]]);}));return _this5;}_createClass(MyStays,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadData();}//控制ui的 loading indication的显示\n},{key:\"render\",value:// grid = {{}}是一种props\n// 凡是props不是string的，需要插入第一层{}表示不需要翻译， 而第二层{}则是js object\nfunction render(){var _this6=this;return/*#__PURE__*/_jsx(List,{loading:this.state.loading,grid:{gutter:16,xs:1,sm:3,md:3,lg:3,xl:4,xxl:4},dataSource:this.state.data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{children:/*#__PURE__*/_jsx(Card,{title:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:150},children:item.name}),/*#__PURE__*/_jsx(StayDetailInfoButton,{stay:item})]}),actions:[/*#__PURE__*/_jsx(ViewReservationsButton,{stay:item})],extra:/*#__PURE__*/_jsx(RemoveStayButton,{stay:item,onRemoveSuccess:_this6.loadData}),children:/*#__PURE__*/_jsx(Carousel,{dots:false,arrows:true,prevArrow:/*#__PURE__*/_jsx(LeftCircleFilled,{}),nextArrow:/*#__PURE__*/_jsx(RightCircleFilled,{}),children:item.images.map(function(image,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Image,{src:image.url,width:\"100%\"})},index);})})},item.id)});}});}}]);return MyStays;}(React.Component);var HostHomePage=/*#__PURE__*/function(_React$Component6){_inherits(HostHomePage,_React$Component6);var _super6=_createSuper(HostHomePage);function HostHomePage(){_classCallCheck(this,HostHomePage);return _super6.apply(this,arguments);}_createClass(HostHomePage,[{key:\"render\",value://destroyInactiveTabPane: delete inactive TabPlane on the DOM tree\nfunction render(){return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"1\",destroyInactiveTabPane:true,children:[/*#__PURE__*/_jsxs(TabPane,{tab:\"My Stays\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"My Stays Content\"}),/*#__PURE__*/_jsx(MyStays,{})]},\"1\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Upload Stay\",children:/*#__PURE__*/_jsx(UploadStay,{})},\"2\")]});}}]);return HostHomePage;}(React.Component);export default HostHomePage;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/HostHomePage.js"],"names":["React","Tabs","List","Card","message","Typography","Button","Tooltip","Modal","Image","Space","Carousel","InfoCircleOutlined","LeftCircleFilled","RightCircleFilled","deleteStay","getReservationsByStay","getStaysByHost","UploadStay","Text","TabPane","StayDetailInfoButton","state","modalVisible","openModal","setState","handleCancel","stay","props","name","description","address","guest_number","border","Component","RemoveStayButton","loading","handleRemoveStay","onRemoveSuccess","id","error","ReservationList","reservations","loadData","stayId","resp","item","guest","username","checkin_date","checkout_date","ViewReservationsButton","modalTitle","MyStays","data","gutter","xs","sm","md","lg","xl","xxl","display","alignItems","maxWidth","images","map","image","index","url","HostHomePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n    Tabs,\n    List,\n    Card,\n    message,\n    Typography,\n    Button,\n    Tooltip,\n    Modal,\n    Image,\n    Space,\n    Carousel,\n} from \"antd\";\nimport {\n    InfoCircleOutlined,\n    LeftCircleFilled,\n    RightCircleFilled,\n} from \"@ant-design/icons\";\nimport { deleteStay, getReservationsByStay, getStaysByHost } from \"../utils\";\nimport UploadStay from \"./UploadStay\";\n\nconst { Text } = Typography;\nconst { TabPane } = Tabs;\n\n\n\n//idea：将与主要功能不缠绕（互相有关系）的button重新分成一个component\nexport class StayDetailInfoButton extends React.Component {\n    state = {\n        modalVisible: false,\n    };\n\n    openModal = () => {\n        this.setState({\n            modalVisible: true,\n        });\n    };\n\n    //控制modal的状态\n    handleCancel = () => {\n        this.setState({\n            modalVisible: false,\n        });\n    };\n\n    render() {\n        const { stay } = this.props;\n        const { name, description, address, guest_number } = stay;\n        const { modalVisible } = this.state;\n        //name of 弹窗: modal\n        return (\n            <>\n                <Tooltip title=\"View Stay Details\">\n                    <Button\n                        onClick={this.openModal}\n                        style={{ border: \"none\" }}\n                        size=\"large\"\n                        icon={<InfoCircleOutlined />}\n                    />\n                </Tooltip>\n                {modalVisible && (\n                    <Modal\n                        title={name}\n                        centered={true}\n                        visible={modalVisible}\n                        closable={false}\n                        footer={null}\n                        onCancel={this.handleCancel}\n                    >\n                        <Space direction=\"vertical\">\n                            <Text strong={true}>Description</Text>\n                            <Text type=\"secondary\">{description}</Text>\n                            <Text strong={true}>Address</Text>\n                            <Text type=\"secondary\">{address}</Text>\n                            <Text strong={true}>Guest Number</Text>\n                            <Text type=\"secondary\">{guest_number}</Text>\n                        </Space>\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n\nclass RemoveStayButton extends React.Component {\n    state = {\n        loading: false,\n    };\n\n    handleRemoveStay = async () => {\n        const { stay, onRemoveSuccess } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            await deleteStay(stay.id);\n            //删除后重新加载页面\n            onRemoveSuccess();\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n\n    render() {\n        return (\n            <Button\n                loading={this.state.loading}\n                onClick={this.handleRemoveStay}\n                danger={true}\n                shape=\"round\"\n                type=\"primary\"\n            >\n                Remove Stay\n            </Button>\n        );\n    }\n}\n\nclass ReservationList extends React.Component {\n    state = {\n        loading: false,\n        reservations: [],\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    loadData = async () => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getReservationsByStay(this.props.stayId);\n            this.setState({\n                reservations: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        const { loading, reservations } = this.state;\n\n        return (\n            <List\n                loading={loading}\n                dataSource={reservations}\n                renderItem={(item) => (\n                    <List.Item>\n                        <List.Item.Meta\n                            title={<Text>Guest Name: {item.guest.username}</Text>}\n                            description={\n                                <>\n                                    <Text>Checkin Date: {item.checkin_date}</Text>\n                                    <br />\n                                    <Text>Checkout Date: {item.checkout_date}</Text>\n                                </>\n                            }\n                        />\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\nclass ViewReservationsButton extends React.Component {\n    state = {\n        modalVisible: false,\n    };\n\n    openModal = () => {\n        this.setState({\n            modalVisible: true,\n        });\n    };\n\n    handleCancel = () => {\n        this.setState({\n            modalVisible: false,\n        });\n    };\n\n    render() {\n        const { stay } = this.props;\n        const { modalVisible } = this.state;\n\n        // string template\n        const modalTitle = `Reservations of ${stay.name}`;\n\n        return (\n            <>\n                <Button onClick={this.openModal} shape=\"round\">\n                    View Reservations\n                </Button>\n                {modalVisible && (\n                    <Modal\n                        title={modalTitle}\n                        centered={true}\n                        visible={modalVisible}\n                        closable={false}\n                        footer={null}\n                        onCancel={this.handleCancel}\n                        destroyOnClose={true}\n                    >\n                        <ReservationList stayId={stay.id} />\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n\nclass MyStays extends React.Component {\n    state = {\n        loading: false,\n        data: [],\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    //控制ui的 loading indication的显示\n    loadData = async () => {\n        const{ stay } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getStaysByHost();\n            this.setState({\n                data: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    // grid = {{}}是一种props\n    // 凡是props不是string的，需要插入第一层{}表示不需要翻译， 而第二层{}则是js object\n    render() {\n        return (\n            <List\n                loading={this.state.loading}\n                grid={{\n                    gutter: 16,\n                    xs: 1,\n                    sm: 3,\n                    md: 3,\n                    lg: 3,\n                    xl: 4,\n                    xxl: 4,\n                }}\n                dataSource={this.state.data}\n                renderItem={(item) => (\n                    <List.Item>\n                        <Card\n                            key={item.id}\n                            title={\n                                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <Text ellipsis={true} style={{ maxWidth: 150 }}>\n                                        {item.name}\n                                    </Text>\n                                    <StayDetailInfoButton stay={item} />\n                                </div>\n                            }\n                            actions={[<ViewReservationsButton stay={item}/>]}\n                            extra={<RemoveStayButton stay={item}\n                                                     onRemoveSuccess={this.loadData} />}\n                        >\n                            {\n                                <Carousel\n                                    dots={false}\n                                    arrows={true}\n                                    prevArrow={<LeftCircleFilled />}\n                                    nextArrow={<RightCircleFilled />}\n                                >\n                                    {item.images.map((image, index) => (\n                                        <div key={index}>\n                                            <Image src={image.url} width=\"100%\" />\n                                        </div>\n                                    ))}\n                                </Carousel>\n                            }\n                        </Card>\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\nclass HostHomePage extends React.Component {\n    //destroyInactiveTabPane: delete inactive TabPlane on the DOM tree\n\n    render() {\n        return (\n            <Tabs defaultActiveKey=\"1\" destroyInactiveTabPane={true}>\n                <TabPane tab=\"My Stays\" key=\"1\">\n                    <div>My Stays Content</div>\n                    <MyStays />\n                </TabPane>\n                <TabPane tab=\"Upload Stay\" key=\"2\">\n                    <UploadStay />\n                </TabPane>\n            </Tabs>\n        );\n    }\n}\n\nexport default HostHomePage;"]},"metadata":{},"sourceType":"module"}