{"ast":null,"code":"var _jsxFileName = \"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/GuestHomePage.js\";\nimport React from \"react\";\nimport { Tabs, message, List, Typography, Button, Form, DatePicker, InputNumber, Card, Carousel, Image, Modal } from \"antd\";\nimport { bookStay, cancelReservation, getReservations, searchStays } from \"../utils\";\nimport { StayDetailInfoButton } from \"../components/HostHomePage\";\nimport { LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nconst {\n  TabPane\n} = Tabs;\n\nclass BookStayButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      modalVisible: false\n    };\n\n    this.handelCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n\n    this.handleSubmit = async values => {\n      const {\n        stay\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await bookStay({\n          checkin_date: values.checkin_date.format(\"YYYY-MM-DD\"),\n          checkout_date: values.checkout_date.format(\"YYYY-MM-DD\"),\n          stay: {\n            id: stay.id\n          }\n        });\n        message.success(\"Successfully book stay\");\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n}\n\nclass SearchStays extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      loading: false\n    };\n\n    this.search = async query => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await searchStays(query);\n        this.setState({\n          data: resp\n        });\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        onFinish: this.search,\n        layout: \"inline\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Guest Number\",\n          name: \"guest_number\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            min: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Checkin Date\",\n          name: \"checkin_date\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Checkout Date\",\n          name: \"checkout_date\",\n          rules: [{\n            required: true\n          }],\n          children: /*#__PURE__*/_jsxDEV(DatePicker, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            loading: this.state.loading,\n            type: \"primary\",\n            htmlType: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        style: {\n          marginTop: 20\n        },\n        loading: this.state.loading,\n        grid: {\n          gutter: 16,\n          xs: 1,\n          sm: 3,\n          md: 3,\n          lg: 3,\n          xl: 4,\n          xxl: 4\n        },\n        dataSource: this.state.data,\n        renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            title: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                ellipsis: true,\n                style: {\n                  maxWidth: 150\n                },\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(StayDetailInfoButton, {\n                stay: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 37\n            }, this),\n            extra: null,\n            children: /*#__PURE__*/_jsxDEV(Carousel, {\n              dots: false,\n              arrows: true,\n              prevArrow: /*#__PURE__*/_jsxDEV(LeftCircleFilled, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 52\n              }, this),\n              nextArrow: /*#__PURE__*/_jsxDEV(RightCircleFilled, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 52\n              }, this),\n              children: item.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Image, {\n                  src: image.url,\n                  width: \"100%\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 49\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 37\n            }, this)\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass MyReservations extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      data: []\n    };\n\n    this.loadData = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await getReservations();\n      } catch (error) {\n        message.error(error.message());\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(List, {\n      style: {\n        width: 1000,\n        margin: \"auto\"\n      },\n      loading: this.state.loading,\n      dataSource: this.state.data,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        //cancel reservation button\n        actions: [],\n        children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          title: /*#__PURE__*/_jsxDEV(Text, {\n            children: item.stay.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 36\n          }, this),\n          description: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkin Date: \", item.checkin_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkout Date: \", item.checkout_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass GuestHomePage extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(Tabs, {\n      defaultActiveKey: \"1\",\n      destroyInactiveTabPane: true,\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Search Stays\",\n        children: /*#__PURE__*/_jsxDEV(SearchStays, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this)\n      }, \"1\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"My Reservations\",\n        children: /*#__PURE__*/_jsxDEV(MyReservations, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }, this)\n      }, \"2\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default GuestHomePage;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/GuestHomePage.js"],"names":["React","Tabs","message","List","Typography","Button","Form","DatePicker","InputNumber","Card","Carousel","Image","Modal","bookStay","cancelReservation","getReservations","searchStays","StayDetailInfoButton","LeftCircleFilled","RightCircleFilled","Text","TabPane","BookStayButton","Component","state","loading","modalVisible","handelCancel","setState","handleSubmit","values","stay","props","checkin_date","format","checkout_date","id","success","error","SearchStays","data","search","query","resp","render","required","marginTop","gutter","xs","sm","md","lg","xl","xxl","item","display","alignItems","maxWidth","name","images","map","image","index","url","MyReservations","loadData","componentDidMount","width","margin","GuestHomePage"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport {Tabs, message, List, Typography, Button, Form, DatePicker,\n    InputNumber, Card, Carousel, Image, Modal,} from \"antd\";\n\nimport { bookStay, cancelReservation, getReservations, searchStays,} from \"../utils\";\nimport { StayDetailInfoButton } from \"../components/HostHomePage\";\nimport { LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\n\nconst { Text } = Typography;\nconst { TabPane } = Tabs;\n\nclass BookStayButton extends React.Component {\n    state = {\n      loading: false,\n        modalVisible: false,\n    };\n\n    handelCancel = () => {\n        this.setState({\n            modalVisible: false,\n        })\n    }\n\n    handleSubmit = async (values) => {\n        const { stay } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            await bookStay({\n                checkin_date: values.checkin_date.format(\"YYYY-MM-DD\"),\n                checkout_date: values.checkout_date.format(\"YYYY-MM-DD\"),\n                stay: {\n                    id: stay.id,\n                },\n            });\n            message.success(\"Successfully book stay\");\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n}\n\nclass SearchStays extends React.Component {\n    state = {\n        data: [],\n        loading: false,\n    };\n\n    search = async (query) => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await searchStays(query);\n            this.setState({\n                data: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        return (\n            <>\n                <Form onFinish={this.search} layout=\"inline\">\n                    <Form.Item\n                        label=\"Guest Number\"\n                        name=\"guest_number\"\n                        rules={[{ required: true }]}\n                    >\n                        <InputNumber min={1} />\n                    </Form.Item>\n                    <Form.Item\n                        label=\"Checkin Date\"\n                        name=\"checkin_date\"\n                        rules={[{ required: true }]}\n                    >\n                        <DatePicker />\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"Checkout Date\"\n                        name=\"checkout_date\"\n                        rules={[{ required: true }]}\n                    >\n                        <DatePicker />\n                    </Form.Item>\n\n                    <Form.Item>\n                        <Button\n                            loading={this.state.loading}\n                            type=\"primary\"\n                            htmlType=\"submit\"\n                        >\n                            Submit\n                        </Button>\n\n                    </Form.Item>\n                </Form>\n\n                {/*展示用户所选中的日期内的酒店*/}\n                <List\n                    style={{ marginTop: 20 }}\n                    loading={this.state.loading}\n                    grid={{\n                        gutter: 16,\n                        xs: 1,\n                        sm: 3,\n                        md: 3,\n                        lg: 3,\n                        xl: 4,\n                        xxl: 4,\n                    }}\n                    dataSource={this.state.data}\n\n                    renderItem={(item) => (\n                        <List.Item>\n                            <Card\n                                key={item.id}\n                                title={\n                                    <div style={{ display: \"flex\",\n                                        alignItems: \"center\" }}>\n                                        <Text ellipsis={true}\n                                              style={{ maxWidth: 150 }}>\n                                            {item.name}\n                                        </Text>\n                                        <StayDetailInfoButton stay={item} />\n                                    </div>\n                                }\n                                extra={null}\n                            >\n                                {\n                                    <Carousel\n                                        dots={false}\n                                        arrows={true}\n                                        prevArrow={<LeftCircleFilled />}\n                                        nextArrow={<RightCircleFilled />}\n                                    >\n                                        {item.images.map((image, index) => (\n                                            <div key={index}>\n                                                <Image src={image.url} width=\"100%\" />\n                                            </div>\n                                        ))}\n                                    </Carousel>\n                                }\n                            </Card>\n                        </List.Item>\n                    )}\n                />\n            </>\n        );\n    }\n}\n\nclass MyReservations extends React.Component {\n    state = {\n        loading: false,\n        data: [],\n    };\n\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    loadData = async() => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getReservations();\n        } catch (error) {\n            message.error(error.message());\n        } finally {\n            this.setState({\n                loading: false\n            });\n        }\n    };\n\n    render() {\n        return (\n            <List\n                style={{ width: 1000, margin: \"auto\" }}\n                loading={this.state.loading}\n                dataSource={this.state.data}\n                renderItem={(item) => (\n                    <List.Item\n                        //cancel reservation button\n                        actions={[]}\n                    >\n                        <List.Item.Meta\n                            title={<Text>{item.stay.name}</Text>}\n                            description={\n                                <>\n                                    <Text>Checkin Date: {item.checkin_date}</Text>\n                                    <br />\n                                    <Text>Checkout Date: {item.checkout_date}</Text>\n                                </>\n                            }\n                        />\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\n\nclass GuestHomePage extends React.Component {\n    render(){\n        return (\n            <Tabs defaultActiveKey=\"1\" destroyInactiveTabPane={true}>\n                <TabPane tab=\"Search Stays\" key=\"1\">\n                    <SearchStays />\n                </TabPane>\n                <TabPane tab=\"My Reservations\" key=\"2\">\n                    <MyReservations />\n                </TabPane>\n            </Tabs>\n        );\n    }\n}\n\nexport default GuestHomePage;\n\n"]},"metadata":{},"sourceType":"module"}