{"ast":null,"code":"var _jsxFileName = \"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/HostHomePage.js\";\nimport React from \"react\";\nimport { Tabs, List, Card, message, Typography, Button, Tooltip, Modal, Image, Space, Carousel } from \"antd\";\nimport { InfoCircleOutlined, LeftCircleFilled, RightCircleFilled } from \"@ant-design/icons\";\nimport { deleteStay, getReservationsByStay, getStaysByHost } from \"../utils\";\nimport UploadStay from \"./UploadStay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nconst {\n  TabPane\n} = Tabs; //idea：将与主要功能不缠绕（互相有关系）的button重新分成一个component\n\nexport class StayDetailInfoButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modalVisible: false\n    };\n\n    this.openModal = () => {\n      this.setState({\n        modalVisible: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n  }\n\n  render() {\n    const {\n      stay\n    } = this.props;\n    const {\n      name,\n      description,\n      address,\n      guest_number\n    } = stay;\n    const {\n      modalVisible\n    } = this.state; //name of 弹窗: modal\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"View Stay Details\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.openModal,\n          style: {\n            border: \"none\"\n          },\n          size: \"large\",\n          icon: /*#__PURE__*/_jsxDEV(InfoCircleOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), modalVisible && /*#__PURE__*/_jsxDEV(Modal, {\n        title: name,\n        centered: true,\n        visible: modalVisible,\n        closable: false,\n        footer: null,\n        onCancel: this.handleCancel,\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            strong: true,\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            type: \"secondary\",\n            children: description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            strong: true,\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            type: \"secondary\",\n            children: address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            strong: true,\n            children: \"Guest Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            type: \"secondary\",\n            children: guest_number\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass RemoveStayButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false\n    };\n\n    this.handleRemoveStay = async () => {\n      const {\n        stay,\n        onRemoveSuccess\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        await deleteStay(stay.id); //删除后重新加载页面\n\n        onRemoveSuccess();\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      loading: this.state.loading,\n      onClick: this.handleRemoveStay,\n      danger: true,\n      shape: \"round\",\n      type: \"primary\",\n      children: \"Remove Stay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass ReservationList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      reservations: []\n    };\n\n    this.loadData = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await getReservationsByStay(this.props.stayId);\n        this.setState({\n          reservations: resp\n        });\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  render() {\n    const {\n      loading,\n      reservations\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(List, {\n      loading: loading,\n      dataSource: reservations,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n          title: /*#__PURE__*/_jsxDEV(Text, {\n            children: [\"Guest Name: \", item.guest.username]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 36\n          }, this),\n          description: /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkin Date: \", item.checkin_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: [\"Checkout Date: \", item.checkout_date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass ViewReservationsButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modalVisible: false\n    };\n\n    this.openModal = () => {\n      this.setState({\n        modalVisible: true\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n  }\n\n  render() {\n    const {\n      stay\n    } = this.props;\n    const {\n      modalVisible\n    } = this.state; // string template\n\n    const modalTitle = `Reservations of ${stay.name}`;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: this.openModal,\n        shape: \"round\",\n        children: \"View Reservations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), modalVisible && /*#__PURE__*/_jsxDEV(Modal, {\n        title: modalTitle,\n        centered: true,\n        visible: modalVisible,\n        closable: false,\n        footer: null,\n        onCancel: this.handleCancel,\n        destroyOnClose: true,\n        children: /*#__PURE__*/_jsxDEV(ReservationList, {\n          stayId: stay.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nclass MyStays extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      data: []\n    };\n\n    this.loadData = async () => {\n      const {\n        stay\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        const resp = await getStaysByHost();\n        this.setState({\n          data: resp\n        });\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  } //控制ui的 loading indication的显示\n\n\n  // grid = {{}}是一种props\n  // 凡是props不是string的，需要插入第一层{}表示不需要翻译， 而第二层{}则是js object\n  render() {\n    return /*#__PURE__*/_jsxDEV(List, {\n      loading: this.state.loading,\n      grid: {\n        gutter: 16,\n        xs: 1,\n        sm: 3,\n        md: 3,\n        lg: 3,\n        xl: 4,\n        xxl: 4\n      },\n      dataSource: this.state.data,\n      renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Text, {\n              ellipsis: true,\n              style: {\n                maxWidth: 150\n              },\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(StayDetailInfoButton, {\n              stay: item\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 33\n          }, this),\n          actions: [/*#__PURE__*/_jsxDEV(ViewReservationsButton, {\n            stay: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 39\n          }, this)],\n          extra: /*#__PURE__*/_jsxDEV(RemoveStayButton, {\n            stay: item,\n            onRemoveSuccess: this.loadData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 36\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Carousel, {\n            dots: false,\n            arrows: true,\n            prevArrow: /*#__PURE__*/_jsxDEV(LeftCircleFilled, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 48\n            }, this),\n            nextArrow: /*#__PURE__*/_jsxDEV(RightCircleFilled, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 48\n            }, this),\n            children: item.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Image, {\n                src: image.url,\n                width: \"100%\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 45\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 41\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 33\n          }, this)\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass HostHomePage extends React.Component {\n  //destroyInactiveTabPane: delete inactive TabPlane on the DOM tree\n  render() {\n    return /*#__PURE__*/_jsxDEV(Tabs, {\n      defaultActiveKey: \"1\",\n      destroyInactiveTabPane: true,\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"My Stays\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"My Stays Content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(MyStays, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this)]\n      }, \"1\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Upload Stay\",\n        children: /*#__PURE__*/_jsxDEV(UploadStay, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this)\n      }, \"2\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default HostHomePage;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/HostHomePage.js"],"names":["React","Tabs","List","Card","message","Typography","Button","Tooltip","Modal","Image","Space","Carousel","InfoCircleOutlined","LeftCircleFilled","RightCircleFilled","deleteStay","getReservationsByStay","getStaysByHost","UploadStay","Text","TabPane","StayDetailInfoButton","Component","state","modalVisible","openModal","setState","handleCancel","render","stay","props","name","description","address","guest_number","border","RemoveStayButton","loading","handleRemoveStay","onRemoveSuccess","id","error","ReservationList","reservations","loadData","resp","stayId","componentDidMount","item","guest","username","checkin_date","checkout_date","ViewReservationsButton","modalTitle","MyStays","data","gutter","xs","sm","md","lg","xl","xxl","display","alignItems","maxWidth","images","map","image","index","url","HostHomePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n    Tabs,\n    List,\n    Card,\n    message,\n    Typography,\n    Button,\n    Tooltip,\n    Modal,\n    Image,\n    Space,\n    Carousel,\n} from \"antd\";\nimport {\n    InfoCircleOutlined,\n    LeftCircleFilled,\n    RightCircleFilled,\n} from \"@ant-design/icons\";\nimport { deleteStay, getReservationsByStay, getStaysByHost } from \"../utils\";\nimport UploadStay from \"./UploadStay\";\n\nconst { Text } = Typography;\nconst { TabPane } = Tabs;\n\n\n\n//idea：将与主要功能不缠绕（互相有关系）的button重新分成一个component\nexport class StayDetailInfoButton extends React.Component {\n    state = {\n        modalVisible: false,\n    };\n\n    openModal = () => {\n        this.setState({\n            modalVisible: true,\n        });\n    };\n\n    //控制modal的状态\n    handleCancel = () => {\n        this.setState({\n            modalVisible: false,\n        });\n    };\n\n    render() {\n        const { stay } = this.props;\n        const { name, description, address, guest_number } = stay;\n        const { modalVisible } = this.state;\n        //name of 弹窗: modal\n        return (\n            <>\n                <Tooltip title=\"View Stay Details\">\n                    <Button\n                        onClick={this.openModal}\n                        style={{ border: \"none\" }}\n                        size=\"large\"\n                        icon={<InfoCircleOutlined />}\n                    />\n                </Tooltip>\n                {modalVisible && (\n                    <Modal\n                        title={name}\n                        centered={true}\n                        visible={modalVisible}\n                        closable={false}\n                        footer={null}\n                        onCancel={this.handleCancel}\n                    >\n                        <Space direction=\"vertical\">\n                            <Text strong={true}>Description</Text>\n                            <Text type=\"secondary\">{description}</Text>\n                            <Text strong={true}>Address</Text>\n                            <Text type=\"secondary\">{address}</Text>\n                            <Text strong={true}>Guest Number</Text>\n                            <Text type=\"secondary\">{guest_number}</Text>\n                        </Space>\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n\nclass RemoveStayButton extends React.Component {\n    state = {\n        loading: false,\n    };\n\n    handleRemoveStay = async () => {\n        const { stay, onRemoveSuccess } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            await deleteStay(stay.id);\n            //删除后重新加载页面\n            onRemoveSuccess();\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n\n    render() {\n        return (\n            <Button\n                loading={this.state.loading}\n                onClick={this.handleRemoveStay}\n                danger={true}\n                shape=\"round\"\n                type=\"primary\"\n            >\n                Remove Stay\n            </Button>\n        );\n    }\n}\n\nclass ReservationList extends React.Component {\n    state = {\n        loading: false,\n        reservations: [],\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    loadData = async () => {\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getReservationsByStay(this.props.stayId);\n            this.setState({\n                reservations: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    render() {\n        const { loading, reservations } = this.state;\n\n        return (\n            <List\n                loading={loading}\n                dataSource={reservations}\n                renderItem={(item) => (\n                    <List.Item>\n                        <List.Item.Meta\n                            title={<Text>Guest Name: {item.guest.username}</Text>}\n                            description={\n                                <>\n                                    <Text>Checkin Date: {item.checkin_date}</Text>\n                                    <br />\n                                    <Text>Checkout Date: {item.checkout_date}</Text>\n                                </>\n                            }\n                        />\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\nclass ViewReservationsButton extends React.Component {\n    state = {\n        modalVisible: false,\n    };\n\n    openModal = () => {\n        this.setState({\n            modalVisible: true,\n        });\n    };\n\n    handleCancel = () => {\n        this.setState({\n            modalVisible: false,\n        });\n    };\n\n    render() {\n        const { stay } = this.props;\n        const { modalVisible } = this.state;\n\n        // string template\n        const modalTitle = `Reservations of ${stay.name}`;\n\n        return (\n            <>\n                <Button onClick={this.openModal} shape=\"round\">\n                    View Reservations\n                </Button>\n                {modalVisible && (\n                    <Modal\n                        title={modalTitle}\n                        centered={true}\n                        visible={modalVisible}\n                        closable={false}\n                        footer={null}\n                        onCancel={this.handleCancel}\n                        destroyOnClose={true}\n                    >\n                        <ReservationList stayId={stay.id} />\n                    </Modal>\n                )}\n            </>\n        );\n    }\n}\n\nclass MyStays extends React.Component {\n    state = {\n        loading: false,\n        data: [],\n    };\n\n    componentDidMount() {\n        this.loadData();\n    }\n\n    //控制ui的 loading indication的显示\n    loadData = async () => {\n        const{ stay } = this.props;\n        this.setState({\n            loading: true,\n        });\n\n        try {\n            const resp = await getStaysByHost();\n            this.setState({\n                data: resp,\n            });\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n    };\n\n    // grid = {{}}是一种props\n    // 凡是props不是string的，需要插入第一层{}表示不需要翻译， 而第二层{}则是js object\n    render() {\n        return (\n            <List\n                loading={this.state.loading}\n                grid={{\n                    gutter: 16,\n                    xs: 1,\n                    sm: 3,\n                    md: 3,\n                    lg: 3,\n                    xl: 4,\n                    xxl: 4,\n                }}\n                dataSource={this.state.data}\n                renderItem={(item) => (\n                    <List.Item>\n                        <Card\n                            key={item.id}\n                            title={\n                                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <Text ellipsis={true} style={{ maxWidth: 150 }}>\n                                        {item.name}\n                                    </Text>\n                                    <StayDetailInfoButton stay={item} />\n                                </div>\n                            }\n                            actions={[<ViewReservationsButton stay={item}/>]}\n                            extra={<RemoveStayButton stay={item}\n                                                     onRemoveSuccess={this.loadData} />}\n                        >\n                            {\n                                <Carousel\n                                    dots={false}\n                                    arrows={true}\n                                    prevArrow={<LeftCircleFilled />}\n                                    nextArrow={<RightCircleFilled />}\n                                >\n                                    {item.images.map((image, index) => (\n                                        <div key={index}>\n                                            <Image src={image.url} width=\"100%\" />\n                                        </div>\n                                    ))}\n                                </Carousel>\n                            }\n                        </Card>\n                    </List.Item>\n                )}\n            />\n        );\n    }\n}\n\nclass HostHomePage extends React.Component {\n    //destroyInactiveTabPane: delete inactive TabPlane on the DOM tree\n\n    render() {\n        return (\n            <Tabs defaultActiveKey=\"1\" destroyInactiveTabPane={true}>\n                <TabPane tab=\"My Stays\" key=\"1\">\n                    <div>My Stays Content</div>\n                    <MyStays />\n                </TabPane>\n                <TabPane tab=\"Upload Stay\" key=\"2\">\n                    <UploadStay />\n                </TabPane>\n            </Tabs>\n        );\n    }\n}\n\nexport default HostHomePage;"]},"metadata":{},"sourceType":"module"}