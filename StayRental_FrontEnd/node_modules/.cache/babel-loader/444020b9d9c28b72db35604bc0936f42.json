{"ast":null,"code":"var _jsxFileName = \"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/UploadStay.js\";\nimport React from \"react\";\nimport { Form, Input, InputNumber, Button, message } from \"antd\";\nimport { uploadStay } from \"../utils\";\nimport LoginPage from \"./LoginPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\n\nclass UploadStay extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false\n    };\n    this.fileInputRef = /*#__PURE__*/React.createRef();\n\n    this.handleSubmit = async values => {\n      const formData = new FormData();\n      const {\n        files\n      } = this.fileInputRef.current; //检查是否传的文件超过五个\n\n      if (files.length > 5) {\n        message.error(\"You can at most upload 5 pictures.\");\n        return;\n      } //将文件append到form data上\n\n\n      for (let i = 0; i < files.length; i++) {\n        formData.append(\"images\", files[i]);\n      } //将上传文件的用户信息append到form data上\n\n\n      formData.append(\"name\", values.name);\n      formData.append(\"address\", values.address);\n      formData.append(\"description\", values.description);\n      formData.append(\"guest_number\", values.guest_number);\n      this.setState({\n        loading: true\n      });\n\n      try {\n        //await uploadStay(formData);\n        message.success(\"upload successfully\");\n      } catch (error) {\n        message.error(error.message);\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n  }\n\n  render() {\n    // {...layout} spread 语法，把layout这个object里的内容，\n    // 一对一对作为key value pair传入form\n    // <Form {...layout}></Form> 等价于 <Form lableCol = {} wrapper= {}> </From>\n    //name是property的名字，label是在ui上显示的字样\n    return /*#__PURE__*/_jsxDEV(Form, { ...layout,\n      name: \"nest-messages\",\n      onFinish: this.handleSubmit,\n      style: {\n        maxWidth: 1000,\n        margin: \"auto\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"name\",\n        label: \"Name\",\n        rules: [{\n          required: true\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"address\",\n        label: \"Address\",\n        rules: [{\n          required: true\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"description\",\n        label: \"Description\",\n        rules: [{\n          required: true\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n          autoSize: {\n            minRows: 2,\n            maxRows: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"guest_number\",\n        label: \"Guest Number\",\n        rules: [{\n          required: true,\n          type: \"number\",\n          min: 1\n        }],\n        children: /*#__PURE__*/_jsxDEV(InputNumber, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"picture\",\n        label: \"Picture\",\n        rules: [{\n          required: true\n        }],\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/png, image/jpeg\",\n          ref: this.fileInputRef,\n          multiple: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        wrapperCol: { ...layout.wrapperCol,\n          offset: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          loading: this.state.loading,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default UploadStay;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/components/UploadStay.js"],"names":["React","Form","Input","InputNumber","Button","message","uploadStay","LoginPage","layout","labelCol","span","wrapperCol","UploadStay","Component","state","loading","fileInputRef","createRef","handleSubmit","values","formData","FormData","files","current","length","error","i","append","name","address","description","guest_number","setState","success","render","maxWidth","margin","required","minRows","maxRows","type","min","offset"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Form, Input, InputNumber, Button, message } from \"antd\";\nimport { uploadStay } from \"../utils\";\nimport LoginPage from \"./LoginPage\";\n\nconst layout = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n}\nclass UploadStay extends React.Component {\n    state = {\n      loading: false,\n    };\n\n    fileInputRef = React.createRef();\n\n    handleSubmit = async(values) => {\n        const formData = new FormData();\n        const { files } = this.fileInputRef.current;\n        //检查是否传的文件超过五个\n        if (files.length > 5) {\n            message.error(\"You can at most upload 5 pictures.\");\n            return;\n        }\n\n        //将文件append到form data上\n        for(let i = 0; i < files.length; i++) {\n            formData.append(\"images\", files[i]);\n        }\n\n        //将上传文件的用户信息append到form data上\n        formData.append(\"name\", values.name);\n        formData.append(\"address\", values.address);\n        formData.append(\"description\", values.description);\n        formData.append(\"guest_number\", values.guest_number);\n\n\n\n        this.setState({\n            loading:true,\n        })\n\n        try {\n           //await uploadStay(formData);\n            message.success(\"upload successfully\");\n        } catch (error) {\n            message.error(error.message);\n        } finally {\n            this.setState({\n                loading: false,\n            });\n        }\n\n    };\n\n    render() {\n        // {...layout} spread 语法，把layout这个object里的内容，\n        // 一对一对作为key value pair传入form\n        // <Form {...layout}></Form> 等价于 <Form lableCol = {} wrapper= {}> </From>\n\n        //name是property的名字，label是在ui上显示的字样\n        return (\n            <Form\n                {...layout}\n                name=\"nest-messages\"\n                onFinish={this.handleSubmit}\n                style={{ maxWidth: 1000, margin: \"auto\" }}\n            >\n                <Form.Item name=\"name\" label=\"Name\" rules={[{ required: true }]}>\n                    <Input />\n                </Form.Item>\n\n                <Form.Item name=\"address\" label=\"Address\" rules={[{ required: true }]}>\n                    <Input />\n                </Form.Item>\n\n                <Form.Item\n                    name=\"description\"\n                    label=\"Description\"\n                    rules={[{ required: true }]}\n                >\n                    <Input.TextArea autoSize={{ minRows: 2, maxRows: 6 }} />\n                </Form.Item>\n\n                <Form.Item\n                    name=\"guest_number\"\n                    label=\"Guest Number\"\n                    rules={[{ required: true, type: \"number\", min: 1 }]}\n                >\n                    <InputNumber />\n                </Form.Item>\n\n                {/*\n                 accept=\"image/png, image/jpeg\" 确定接受的文件格式\n                */}\n                <Form.Item name=\"picture\" label=\"Picture\" rules={[{ required: true }]}>\n                    <input\n                        type=\"file\"\n                        accept=\"image/png, image/jpeg\"\n                        ref={this.fileInputRef}\n                        multiple={true}\n                    />\n                </Form.Item>\n\n                <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 8 }}>\n                    <Button type=\"primary\" htmlType=\"submit\" loading={this.state.loading}>\n                        Submit\n                    </Button>\n                </Form.Item>\n            </Form>\n        );\n    }\n}\n\nexport default UploadStay;"]},"metadata":{},"sourceType":"module"}