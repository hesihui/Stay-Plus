{"ast":null,"code":"import _classCallCheck from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{Layout,Dropdown,Menu,Button}from\"antd\";import{UserOutlined}from\"@ant-design/icons\";import React from\"react\";import LoginPage from\"./components/LoginPage\";import HostHomePage from\"./components/HostHomePage\";import GuestHomePage from\"./components/GuestHomePage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=Layout.Header,Content=Layout.Content;//deconstruction，等效于 const Header = Layout.Haader\nvar App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={authed:false,asHost:false};_this.handleLoginSuccess=function(token,asHost){localStorage.setItem(\"authToken\",token);localStorage.setItem(\"asHost\",asHost);_this.setState({authed:true,asHost:asHost});};_this.handleLogOut=function(){localStorage.removeItem(\"authToken\");localStorage.removeItem(\"asHost\");_this.setState({authed:false});};_this.renderContent=function(){if(!_this.state.authed){return/*#__PURE__*/_jsx(LoginPage,{handleLoginSuccess:_this.handleLoginSuccess});}if(_this.state.asHost){return/*#__PURE__*/_jsx(HostHomePage,{});}return/*#__PURE__*/_jsx(GuestHomePage,{});};_this.userMenu=/*#__PURE__*/_jsx(Menu,{children:/*#__PURE__*/_jsx(Menu.Item,{onClick:_this.handleLogOut,children:\"Log Out\"},\"logout\")});return _this;}_createClass(App,[{key:\"componentDidMount\",value://coponentDidMount：app component的render函数执行完之后（一来到主页时），所做的事情\nfunction componentDidMount(){//log-in persistance\n// localStorage: 格式-map，可以persist数据\nvar authToken=localStorage.getItem(\"authToken\");var asHost=localStorage.getItem(\"asHost\")===\"true\";this.setState({authed:authToken!==null,asHost:asHost});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(Layout,{style:{height:\"100vh\"},children:[/*#__PURE__*/_jsxs(Header,{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:16,fontWeight:600,color:\"white\"},children:\"Stays Booking\"}),this.state.authed&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Dropdown,{trigger:\"click\",overlay:this.userMenu,children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(UserOutlined,{}),shape:\"circle\"})})})]}),/*#__PURE__*/_jsx(Content,{style:{height:\"calc(100% - 64px)\",margin:20,overflow:\"auto\"},children:this.renderContent()})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/staybooking-app/staybooking-app/src/App.js"],"names":["Layout","Dropdown","Menu","Button","UserOutlined","React","LoginPage","HostHomePage","GuestHomePage","Header","Content","App","state","authed","asHost","handleLoginSuccess","token","localStorage","setItem","setState","handleLogOut","removeItem","renderContent","userMenu","authToken","getItem","height","display","justifyContent","fontSize","fontWeight","color","margin","overflow","Component"],"mappings":"wtBAAA,OAASA,MAAT,CAAiBC,QAAjB,CAA2BC,IAA3B,CAAiCC,MAAjC,KAA+C,MAA/C,CACA,OAASC,YAAT,KAA6B,mBAA7B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,C,wFAEA,GAAQC,CAAAA,MAAR,CAA4BT,MAA5B,CAAQS,MAAR,CAAgBC,OAAhB,CAA4BV,MAA5B,CAAgBU,OAAhB,CACA;GAEMC,CAAAA,G,2TACJC,K,CAAQ,CACNC,MAAM,CAAE,KADF,CAENC,MAAM,CAAE,KAFF,C,OAiBRC,kB,CAAqB,SAACC,KAAD,CAAQF,MAAR,CAAmB,CACtCG,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCF,KAAlC,EACAC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+BJ,MAA/B,EACA,MAAKK,QAAL,CAAc,CACZN,MAAM,CAAE,IADI,CAEZC,MAAM,CAANA,MAFY,CAAd,EAID,C,OAEDM,Y,CAAe,UAAM,CACnBH,YAAY,CAACI,UAAb,CAAwB,WAAxB,EACAJ,YAAY,CAACI,UAAb,CAAwB,QAAxB,EACA,MAAKF,QAAL,CAAc,CACZN,MAAM,CAAE,KADI,CAAd,EAGD,C,OAGDS,a,CAAgB,UAAM,CAEpB,GAAI,CAAC,MAAKV,KAAL,CAAWC,MAAhB,CAAwB,CACtB,mBAAO,KAAC,SAAD,EAAW,kBAAkB,CAAE,MAAKE,kBAApC,EAAP,CACD,CAED,GAAI,MAAKH,KAAL,CAAWE,MAAf,CAAuB,CACrB,mBAAO,KAAC,YAAD,IAAP,CACD,CAED,mBAAO,KAAC,aAAD,IAAP,CACD,C,OAEDS,Q,cACI,KAAC,IAAD,wBACE,KAAC,IAAD,CAAM,IAAN,EAAwB,OAAO,CAAE,MAAKH,YAAtC,qBAAe,QAAf,CADF,E,gEA5CJ;AACA,4BAAoB,CAClB;AACA;AACA,GAAMI,CAAAA,SAAS,CAAGP,YAAY,CAACQ,OAAb,CAAqB,WAArB,CAAlB,CACA,GAAMX,CAAAA,MAAM,CAAGG,YAAY,CAACQ,OAAb,CAAqB,QAArB,IAAmC,MAAlD,CACA,KAAKN,QAAL,CAAc,CACZN,MAAM,CAAEW,SAAS,GAAK,IADV,CAEZV,MAAM,CAANA,MAFY,CAAd,EAID,C,sBAyCD,iBAAS,CACP,mBACI,MAAC,MAAD,EAAQ,KAAK,CAAE,CAAEY,MAAM,CAAE,OAAV,CAAf,wBACE,MAAC,MAAD,EAAQ,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,eAAnC,CAAf,wBACE,YAAK,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAAgBC,UAAU,CAAE,GAA5B,CAAiCC,KAAK,CAAE,OAAxC,CAAZ,2BADF,CAIG,KAAKnB,KAAL,CAAWC,MAAX,eACG,kCACE,KAAC,QAAD,EAAU,OAAO,CAAC,OAAlB,CAA0B,OAAO,CAAE,KAAKU,QAAxC,uBACE,KAAC,MAAD,EAAQ,IAAI,cAAE,KAAC,YAAD,IAAd,CAAgC,KAAK,CAAC,QAAtC,EADF,EADF,EALN,GADF,cAcE,KAAC,OAAD,EACI,KAAK,CAAE,CAAEG,MAAM,CAAE,mBAAV,CAA+BM,MAAM,CAAE,EAAvC,CAA2CC,QAAQ,CAAE,MAArD,CADX,UAGG,KAAKX,aAAL,EAHH,EAdF,GADJ,CAsBD,C,iBAhFejB,KAAK,CAAC6B,S,EAmFxB,cAAevB,CAAAA,GAAf","sourcesContent":["import { Layout, Dropdown, Menu, Button } from \"antd\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport React from \"react\";\nimport LoginPage from \"./components/LoginPage\";\nimport HostHomePage from \"./components/HostHomePage\";\nimport GuestHomePage from \"./components/GuestHomePage\";\n\nconst { Header, Content } = Layout;\n//deconstruction，等效于 const Header = Layout.Haader\n\nclass App extends React.Component {\n  state = {\n    authed: false,\n    asHost: false,\n  };\n\n  //coponentDidMount：app component的render函数执行完之后（一来到主页时），所做的事情\n  componentDidMount() {\n    //log-in persistance\n    // localStorage: 格式-map，可以persist数据\n    const authToken = localStorage.getItem(\"authToken\");\n    const asHost = localStorage.getItem(\"asHost\") === \"true\";\n    this.setState({\n      authed: authToken !== null,\n      asHost,\n    });\n  }\n\n  handleLoginSuccess = (token, asHost) => {\n    localStorage.setItem(\"authToken\", token);\n    localStorage.setItem(\"asHost\", asHost);\n    this.setState({\n      authed: true,\n      asHost,\n    });\n  };\n\n  handleLogOut = () => {\n    localStorage.removeItem(\"authToken\");\n    localStorage.removeItem(\"asHost\");\n    this.setState({\n      authed: false,\n    });\n  };\n\n  //在外层定义content， 用于处理当content的逻辑复杂时，专门针对content的render函数\n  renderContent = () => {\n\n    if (!this.state.authed) {\n      return <LoginPage handleLoginSuccess={this.handleLoginSuccess} />;\n    }\n\n    if (this.state.asHost) {\n      return <HostHomePage />;\n    }\n\n    return <GuestHomePage />;\n  };\n\n  userMenu = (\n      <Menu>\n        <Menu.Item key=\"logout\" onClick={this.handleLogOut}>\n          Log Out\n        </Menu.Item>\n      </Menu>\n  );\n\n  render() {\n    return (\n        <Layout style={{ height: \"100vh\" }}>\n          <Header style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n            <div style={{ fontSize: 16, fontWeight: 600, color: \"white\" }}>\n              Stays Booking\n            </div>\n            {this.state.authed && (\n                <div>\n                  <Dropdown trigger=\"click\" overlay={this.userMenu}>\n                    <Button icon={<UserOutlined />} shape=\"circle\" />\n                  </Dropdown>\n                </div>\n            )}\n          </Header>\n\n          <Content\n              style={{ height: \"calc(100% - 64px)\", margin: 20, overflow: \"auto\" }}\n          >\n            {this.renderContent()}\n          </Content>\n        </Layout>\n    );\n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}